<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Lab Fullstack â€“ Tic Tac Toe</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
      }

      body {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #0f172a, #1d4ed8);
        color: #e5e7eb;
      }

      .game-container {
        background: rgba(15, 23, 42, 0.95);
        padding: 24px 28px;
        border-radius: 16px;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.5);
        width: 320px;
        text-align: center;
      }

      h1 {
        font-size: 22px;
        margin-bottom: 12px;
      }

      .subtitle {
        font-size: 13px;
        color: #9ca3af;
        margin-bottom: 18px;
      }

      .board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
        margin-bottom: 18px;
      }

      .cell {
        width: 90px;
        height: 90px;
        border-radius: 10px;
        background: #020617;
        border: 1px solid #1e293b;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 40px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.15s, transform 0.1s, box-shadow 0.1s;
      }

      .cell:hover {
        background: #020817;
        box-shadow: 0 0 0 1px #1d4ed8;
        transform: translateY(-1px);
      }

      .cell.X {
        color: #22c55e;
      }

      .cell.O {
        color: #f97316;
      }

      .status {
        font-size: 14px;
        margin-bottom: 16px;
      }

      .status span {
        font-weight: 600;
      }

      button {
        border: none;
        padding: 8px 14px;
        border-radius: 999px;
        background: #1d4ed8;
        color: white;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.15s, transform 0.1s, box-shadow 0.1s;
      }

      button:hover {
        background: #2563eb;
        box-shadow: 0 8px 20px rgba(37, 99, 235, 0.5);
        transform: translateY(-1px);
      }

      button:active {
        transform: translateY(0);
        box-shadow: none;
      }

      .footer {
        margin-top: 10px;
        font-size: 11px;
        color: #6b7280;
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <h1>Tic Tac Toe â€“ Lab</h1>
      <p class="subtitle">X commence. Aligne 3 symboles pour gagner.</p>

      <div class="board" id="board">
        <!-- 9 cases -->
      </div>

      <p class="status" id="status">
        Tour du joueur : <span id="player">X</span>
      </p>

      <button id="reset">Recommencer la partie</button>

      <p class="footer">Semaine 3 â€“ Lab Fullstack & DevOps</p>
    </div>

    <script>
      const boardElement = document.getElementById("board");
      const statusElement = document.getElementById("status");
      const playerElement = document.getElementById("player");
      const resetButton = document.getElementById("reset");

      let board = Array(9).fill(null); // Ã©tat des 9 cases
      let currentPlayer = "X";
      let gameOver = false;

      // CrÃ©e les 9 cases dans le DOM
      function createBoard() {
        boardElement.innerHTML = "";
        for (let i = 0; i < 9; i++) {
          const cell = document.createElement("button");
          cell.classList.add("cell");
          cell.dataset.index = i;
          cell.addEventListener("click", onCellClick);
          boardElement.appendChild(cell);
        }
      }

      function onCellClick(e) {
        const index = e.target.dataset.index;

        if (gameOver || board[index]) return; // dÃ©jÃ  jouÃ© ou partie finie

        board[index] = currentPlayer;
        e.target.textContent = currentPlayer;
        e.target.classList.add(currentPlayer);

        if (checkWin(currentPlayer)) {
          statusElement.textContent = `Le joueur ${currentPlayer} a gagnÃ© ðŸŽ‰`;
          gameOver = true;
          return;
        }

        if (board.every((cell) => cell !== null)) {
          statusElement.textContent = "Match nul ðŸ¤";
          gameOver = true;
          return;
        }

        // changer de joueur
        currentPlayer = currentPlayer === "X" ? "O" : "X";
        playerElement.textContent = currentPlayer;
      }

      function checkWin(player) {
        const wins = [
          [0, 1, 2],
          [3, 4, 5],
          [6, 7, 8],
          [0, 3, 6],
          [1, 4, 7],
          [2, 5, 8],
          [0, 4, 8],
          [2, 4, 6],
        ];

        return wins.some(([a, b, c]) => {
          return board[a] === player && board[b] === player && board[c] === player;
        });
      }

      function resetGame() {
        board = Array(9).fill(null);
        currentPlayer = "X";
        playerElement.textContent = currentPlayer;
        statusElement.textContent = "Tour du joueur : ";
        statusElement.appendChild(playerElement);
        gameOver = false;
        createBoard();
      }

      resetButton.addEventListener("click", resetGame);

      // initialisation
      createBoard();
    </script>
  </body>
</html>
